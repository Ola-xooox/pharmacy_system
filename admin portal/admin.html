<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
     <link rel="icon" type="image/x-icon" href="mjpharma.jpg">
</head>
<body class="bg-gray-100 min-h-screen flex">
    <aside class="w-64 bg-green-500 text-white p-6 shadow-lg rounded-r-3xl flex flex-col justify-between">
        <div>
            <div class="flex items-center space-x-2 mb-8">
                <img src="mjpharma.jpg" alt="Logo" class="rounded-full w-10 h-10">
                <span class="text-xl font-bold">ADMIN PORTAL</span>
            </div>
            
            <nav>
                <ul class="space-y-4">
                    <li>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:text-[#236B3D] transition-colors duration-200" data-page="dashboard-page">
                            <i class="ph-fill ph-speedometer text-xl"></i>
                            <span class="font-semibold">Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:text-[#236B3D] transition-colors duration-200" data-page="setup-account-page">
                            <i class="ph-fill ph-user-plus text-xl"></i>
                            <span class="font-semibold">Set Up New Account</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:text-[#236B3D] transition-colors duration-200" data-page="user-activity-page">
                            <i class="ph-fill ph-notepad text-xl"></i>
                            <span class="font-semibold">User Activity Log</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:text-[#236B3D] transition-colors duration-200" data-page="inventory-report-page">
                            <i class="ph-fill ph-package text-xl"></i>
                            <span class="font-semibold">Inventory Report</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:text-[#236B3D] transition-colors duration-200" data-page="sales-report-page">
                            <i class="ph-fill ph-chart-line-up text-xl"></i>
                            <span class="font-semibold">Sales Report</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </aside>

    <main class="flex-1 p-8">
        <header class="flex justify-between items-center bg-white p-6 rounded-3xl shadow-md mb-8">
            <h1 id="page-title" class="text-3xl font-bold text-gray-800">Dashboard</h1>
            <div class="flex items-center space-x-4 text-gray-600">
                <span id="current-date" class="font-medium"></span>
                <span id="current-time" class="font-medium"></span>
                <i id="notification-bell" class="ph-fill ph-bell-simple text-2xl cursor-pointer hover:text-[#236B3D]"></i>
                <i class="ph-fill ph-sign-out text-xl"></i>
            </div>
        </header>

        <div id="page-content">
            <div id="dashboard-page" class="space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Total sales today</p>
                            <p class="text-2xl font-bold text-[#236B3D]">₱24,000</p>
                        </div>
                        <i class="ph-fill ph-chart-line text-4xl text-gray-400"></i>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Active User</p>
                            <p class="text-2xl font-bold text-[#236B3D]">5</p>
                        </div>
                        <i class="ph-fill ph-user-list text-4xl text-gray-400"></i>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Total inventory</p>
                            <p class="text-2xl font-bold text-[#236B3D]">1,560</p>
                        </div>
                        <i class="ph-fill ph-package text-4xl text-gray-400"></i>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Low stock item</p>
                            <p class="text-2xl font-bold text-red-500">10</p>
                            <span class="text-xs text-gray-400">needs attention</span>
                        </div>
                        <i class="ph-fill ph-warning text-4xl text-red-500"></i>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-md">
                        <h2 class="text-xl font-bold mb-4 text-gray-800">Sales Overview</h2>
                        <div style="position: relative; height:300px;">
                            <canvas id="salesOverviewChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md">
                        <h2 class="text-xl font-bold mb-4 flex justify-between items-center text-gray-800">
                            <span>Recent Transaction</span>
                            <a href="#" class="text-[#236B3D] font-medium text-sm hover:underline">View all</a>
                        </h2>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center border-b pb-2">
                                <div>
                                    <p class="font-medium">Amoxicillin 500mg</p>
                                    <p class="text-sm text-gray-500">10:20 AM</p>
                                </div>
                                <p class="text-lg font-bold text-[#236B3D]">₱420</p>
                            </div>
                            <div class="flex justify-between items-center border-b pb-2">
                                <div>
                                    <p class="font-medium">Paracetamol 500mg</p>
                                    <p class="text-sm text-gray-500">09:45 AM</p>
                                </div>
                                <p class="text-lg font-bold text-gray-800">₱150</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Inventory Stock</h2>
                    <div style="position: relative; height:300px;">
                        <canvas id="inventoryStockChart"></canvas>
                    </div>
                </div>
            </div>

            <div id="setup-account-page" class="hidden">
                <div class="bg-white p-8 rounded-2xl shadow-md max-w-2xl mx-auto">
                    <h2 class="text-2xl font-bold mb-6 text-gray-800">Set Up New Account</h2>
                    <form class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700">Enter Name</label>
                            <input type="text" id="name" name="name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-[#236B3D] focus:ring focus:ring-[#236B3D] focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="username" class="block text-sm font-medium text-gray-700">User Name</label>
                            <input type="text" id="username" name="username" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-[#236B3D] focus:ring focus:ring-[#236B3D] focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="password" name="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-[#236B3D] focus:ring focus:ring-[#236B3D] focus:ring-opacity-50">
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button type="button" class="bg-green-500 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                POS Access
                            </button>
                            <button type="button" class="bg-green-500 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                Inventory Access
                            </button>
                            <button type="button" class="bg-green-500 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                Customer Mgmt.
                            </button>
                        </div>
                        <button type="submit" class="w-full bg-green-500 text-white py-3 rounded-lg font-bold text-lg hover:bg-green-700 transition-colors duration-200">
                            Create Account
                        </button>
                    </form>
                </div>
            </div>

            <div id="user-activity-page" class="hidden">
                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Activity History</h2>
                        <input type="text" id="activity-search" placeholder="search user/action" class="w-1/3 p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring focus:ring-green-500 focus:ring-opacity-50">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-gray-50 border-b-2 border-gray-200">
                                    <th class="py-3 px-4 font-semibold text-gray-600">User</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Action</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Time Stamp</th>
                                </tr>
                            </thead>
                            <tbody id="activity-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="inventory-report-page" class="hidden space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Total stocks</p>
                            <p class="text-2xl font-bold text-[#236B3D]">750</p>
                            <span class="text-xs text-gray-400">8 products</span>
                        </div>
                        <i class="ph-fill ph-package text-4xl text-gray-400"></i>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Expiring Soon</p>
                            <p class="text-2xl font-bold text-orange-500">50</p>
                            <span class="text-xs text-gray-400">within 3 months</span>
                        </div>
                        <i class="ph-fill ph-clock-countdown text-4xl text-gray-400"></i>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Inventory Status</h2>
                    <div style="position: relative; height:300px;">
                        <canvas id="inventoryStatusChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Inventory Management</h2>
                        <input type="text" id="inventory-search" placeholder="search" class="w-1/3 p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring focus:ring-green-500 focus:ring-opacity-50">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-gray-50 border-b-2 border-gray-200">
                                    <th class="py-3 px-4 font-semibold text-gray-600">Product</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Stock</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Expiry date</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Supplier</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Recieved Date</th>
                                </tr>
                            </thead>
                            <tbody id="inventory-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="sales-report-page" class="hidden space-y-8">
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Total Revenue</p>
                            <p class="text-2xl font-bold text-[#236B3D]">₱4,850</p>
                        </div>
                        <i class="ph-fill ph-currency-rub text-4xl text-gray-400"></i>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Net Profit</p>
                            <p class="text-2xl font-bold text-green-500">₱1,445</p>
                        </div>
                        <i class="ph-fill ph-piggy-bank text-4xl text-gray-400"></i>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500">Total Orders</p>
                            <p class="text-2xl font-bold text-[#236B3D]">18</p>
                        </div>
                        <i class="ph-fill ph-shopping-bag text-4xl text-gray-400"></i>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Sales Performance Daily</h2>
                    <div style="position: relative; height:300px;">
                        <canvas id="salesPerformanceChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Today's Transaction</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-gray-50 border-b-2 border-gray-200">
                                    <th class="py-3 px-4 font-semibold text-gray-600">Date's</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Item's Profit</th>
                                    <th class="py-3 px-4 font-semibold text-gray-600">Profit</th>
                                </tr>
                            </thead>
                            <tbody id="sales-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div id="notification-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden justify-center items-center">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold text-gray-800">Notifications</h3>
                <button id="close-notification-modal" class="text-gray-500 hover:text-gray-800">
                    <i class="ph-fill ph-x text-2xl"></i>
                </button>
            </div>
            <div id="notification-list" class="space-y-4">
                </div>
        </div>
    </div>

    <script>
        // Get references to DOM elements
        const pageLinks = document.querySelectorAll('nav a');
        const pageContent = document.getElementById('page-content');
        const pageTitle = document.getElementById('page-title');
        const notificationBell = document.getElementById('notification-bell');
        const notificationModal = document.getElementById('notification-modal');
        const closeNotificationModalBtn = document.getElementById('close-notification-modal');
        const notificationList = document.getElementById('notification-list');

        // Chart instances
        let salesOverviewChartInstance = null;
        let inventoryStockChartInstance = null;
        let inventoryStatusChartInstance = null;
        let salesPerformanceChartInstance = null;
        
        // Mock data for the various sections
        const mockData = {
            activities: [
                { user: 'Cabales, Edmalyn', action: 'Log In POS', timestamp: '2025-07-15 08:30:45' },
                { user: 'Pisngot, Mark James', action: 'Updated Inventory', timestamp: '2025-07-15 08:30:45' },
                { user: 'Indoso, Jairo', action: 'Created New Account', timestamp: '2025-07-15 08:30:45' },
                { user: 'Elacion, Kim', action: 'Logged out', timestamp: '2025-07-14 17:00:00' },
                { user: 'Micah, Mhae', action: 'Viewed Sales Report', timestamp: '2025-07-14 16:30:00' },
            ],
            inventory: [
                { product: 'Paracetamol 500mg', stock: 521, expiry: '2025-07-05', supplier: 'Pharma Corp Inc.', received: '2025-08-01' },
                { product: 'Vitamin C 500mg', stock: 521, expiry: '2025-07-05', supplier: 'Pharma Corp Inc.', received: '2025-08-01' },
                { product: 'Cetirizine 10gm', stock: 521, expiry: '2025-07-05', supplier: 'Pharma Corp Inc.', received: '2025-08-01' },
                { product: 'Ibuprofen 400gm', stock: 521, expiry: '2025-07-05', supplier: 'Pharma Corp Inc.', received: '2025-08-01' },
            ],
            sales: [
                { date: '2025-08-01', itemProfit: 109, profit: 3735 },
                { date: '2025-07-31', itemProfit: 109, profit: 3735 },
                { date: '2025-07-30', itemProfit: 109, profit: 3735 },
                { date: '2025-07-29', itemProfit: 109, profit: 3735 },
            ],
            
            notifications: [
                { type: 'alert', message: 'Low stock: Paracetamol 500mg needs attention!', time: '2 minutes ago' },
                { type: 'alert', message: 'New user "John Smith" has registered.', time: '1 hour ago' },
                { type: 'info', message: 'Sales report for August is now available.', time: 'Yesterday' },
            ]
        };

        // Function to update the date and time in the header
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);
            document.getElementById('current-time').textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        }
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Function to destroy existing charts if they exist
        function destroyCharts() {
            if (salesOverviewChartInstance) salesOverviewChartInstance.destroy();
            if (inventoryStockChartInstance) inventoryStockChartInstance.destroy();
            if (inventoryStatusChartInstance) inventoryStatusChartInstance.destroy();
            if (salesPerformanceChartInstance) salesPerformanceChartInstance.destroy();
        }

        // Function to render charts based on the current page
        function renderCharts(pageId) {
            destroyCharts();

            if (pageId === 'dashboard-page') {
                // Sales Overview Chart for Dashboard
                const salesCtx = document.getElementById('salesOverviewChart').getContext('2d');
                salesOverviewChartInstance = new Chart(salesCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Item 1', 'Item 2', 'Item 3', 'Item 4'],
                        datasets: [{
                            label: 'Sales',
                            data: [12, 19, 15, 20],
                            backgroundColor: ['#b3e0ff', '#80caff', '#4db8ff', '#1a95ff'],
                            borderRadius: 8,
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: false } } }
                });

                // Inventory Stock Chart for Dashboard
                const inventoryCtx = document.getElementById('inventoryStockChart').getContext('2d');
                inventoryStockChartInstance = new Chart(inventoryCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Item 1', 'Item 2', 'Item 3'],
                        datasets: [
                            { label: 'in stock', data: [8, 12, 18], backgroundColor: '#4db8ff', borderRadius: 8 },
                            { label: 'outlets', data: [4, 6, 9], backgroundColor: '#b3e0ff', borderRadius: 8 }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: true, position: 'top', labels: { usePointStyle: true } } } }
                });
            } else if (pageId === 'inventory-report-page') {
                // Inventory Status Chart for Inventory Report
                const invStatusCtx = document.getElementById('inventoryStatusChart').getContext('2d');
                inventoryStatusChartInstance = new Chart(invStatusCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Item 1', 'Item 2', 'Item 3'],
                        datasets: [
                            { label: 'outlets', data: [4, 6, 9], backgroundColor: '#4db8ff', borderRadius: 8 },
                            { label: 'in stock', data: [8, 12, 18], backgroundColor: '#b3e0ff', borderRadius: 8 }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: true, position: 'top', labels: { usePointStyle: true } } } }
                });
            } else if (pageId === 'sales-report-page') {
                // Sales Performance Daily Chart for Sales Report
                const salesPerfCtx = document.getElementById('salesPerformanceChart').getContext('2d');
                salesPerformanceChartInstance = new Chart(salesPerfCtx, {
                    type: 'bar',
                    data: {
                        labels: ['6am', '8am', '10am', '12pm', '2pm', '4pm', '6pm'],
                        datasets: [{
                            label: 'Sales',
                            data: [7, 12, 15, 18, 8, 11, 19],
                            backgroundColor: ['#b3e0ff', '#80caff', '#4db8ff', '#1a95ff', '#4db8ff', '#80caff', '#b3e0ff'],
                            borderRadius: 8,
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: false } } }
                });
            }
        }

        // Function to render table data from mockData
        function renderTables() {
            // User Activity Table
            const activityTableBody = document.getElementById('activity-table-body');
            activityTableBody.innerHTML = mockData.activities.map(item => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="py-3 px-4">${item.user}</td>
                    <td class="py-3 px-4">${item.action}</td>
                    <td class="py-3 px-4">${item.timestamp}</td>
                </tr>
            `).join('');

            // Inventory Management Table
            const inventoryTableBody = document.getElementById('inventory-table-body');
            inventoryTableBody.innerHTML = mockData.inventory.map(item => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="py-3 px-4">${item.product}</td>
                    <td class="py-3 px-4">${item.stock}</td>
                    <td class="py-3 px-4">${item.expiry}</td>
                    <td class="py-3 px-4">${item.supplier}</td>
                    <td class="py-3 px-4">${item.received}</td>
                </tr>
            `).join('');
            
            // Sales Table
            const salesTableBody = document.getElementById('sales-table-body');
            salesTableBody.innerHTML = mockData.sales.map(item => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="py-3 px-4">${item.date}</td>
                    <td class="py-3 px-4">${item.itemProfit}</td>
                    <td class="py-3 px-4">₱${item.profit}</td>
                </tr>
            `).join('');
        }

        // Function to render notifications in the modal
        function renderNotifications() {
            notificationList.innerHTML = mockData.notifications.map(n => `
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                    <div class="flex items-center space-x-2 mb-1">
                        ${n.type === 'alert' ? '<i class="ph-fill ph-warning-circle text-red-500"></i>' : '<i class="ph-fill ph-info text-blue-500"></i>'}
                        <span class="font-bold">${n.message}</span>
                    </div>
                    <p class="text-sm text-gray-500">${n.time}</p>
                </div>
            `).join('');
        }

        // Event listener for navigation links
        pageLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                // Hide all pages
                const allPages = pageContent.querySelectorAll('div[id$="-page"]');
                allPages.forEach(page => page.classList.add('hidden'));

                // Show the selected page
                const pageId = e.currentTarget.dataset.page;
                document.getElementById(pageId).classList.remove('hidden');

                // Update the page title
                pageTitle.textContent = e.currentTarget.querySelector('span').textContent;

                // Re-render tables and charts for the new page
                renderTables();
                renderCharts(pageId);
            });
        });

        // Event listener for the notification bell
        notificationBell.addEventListener('click', () => {
            renderNotifications();
            notificationModal.classList.toggle('hidden');
            notificationModal.classList.toggle('flex');
        });

        // Event listener to close the notification modal
        closeNotificationModalBtn.addEventListener('click', () => {
            notificationModal.classList.add('hidden');
            notificationModal.classList.remove('flex');
        });

        // Function to filter tables based on search input
        function setupSearch(inputId, tableBodyId, dataKey, filterKeys) {
            const searchInput = document.getElementById(inputId);
            if (!searchInput) return;

            const tableBody = document.getElementById(tableBodyId);
            const data = mockData[dataKey];
            
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const filteredData = data.filter(item => 
                    filterKeys.some(key => String(item[key]).toLowerCase().includes(searchTerm))
                );

                let tableHtml = '';
                if (dataKey === 'activities') {
                    tableHtml = filteredData.map(item => `
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3 px-4">${item.user}</td>
                            <td class="py-3 px-4">${item.action}</td>
                            <td class="py-3 px-4">${item.timestamp}</td>
                        </tr>
                    `).join('');
                } else if (dataKey === 'inventory') {
                    tableHtml = filteredData.map(item => `
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3 px-4">${item.product}</td>
                            <td class="py-3 px-4">${item.stock}</td>
                            <td class="py-3 px-4">${item.expiry}</td>
                            <td class="py-3 px-4">${item.supplier}</td>
                            <td class="py-3 px-4">${item.received}</td>
                        </tr>
                    `).join('');
                }
                tableBody.innerHTML = tableHtml;
            });
        }
        
        // Initial setup on page load
        window.onload = function() {
            renderCharts('dashboard-page');
            renderTables();
            setupSearch('activity-search', 'activity-table-body', 'activities', ['user', 'action']);
            setupSearch('inventory-search', 'inventory-table-body', 'inventory', ['product', 'supplier']);
        };
    </script>
</body>
</html>